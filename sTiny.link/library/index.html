<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html>
  <head>
    <link rel="shortcut icon" type="image/x-icon" href="/resources/images/favicon.ico">
    <title>sTiny.link - Library</title>
    <meta name='theme-color' content='#151515'>
    <meta name='viewport' content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0'> 
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <link href='/resources/master.css' rel='stylesheet' type='text/css'>
    <script src='/resources/master.js'></script>
  </head>
  <body style='color:white; font-family:GmarketSansLight;'>
    
<div style='position:absolute; background:linear-gradient(135deg,#39a86c,#3284bf);'>
</div>
<div R='height:h(100); width:h(100/2)' style='position:absolute;'>
  <div class='bottomCenterAlign' R='height:h(20); font-size:h(5);' style='font-family:GmarketSansBold; text-shadow:2px 2px 4px rgba(0,0,0,0.4);'>
    <span class='button' onclick="location.href = '../'">sTiny.link</span>
    <img src='https://suburl.at/resources/images/libraryDescription.png' R='width:w(90)'>
  </div>
  <div class='bottomCenterAlign' R='height:h(20)'>
    <div R='width:w(90); height:h(80); border:white w(1) solid; border-radius:w(7.5);'>
      <div R='height:h(45)'>
        <input id='sTinyLinkInput' type='text' placeholder='John.Doe' autocomplete='off' R='width:w(65); height:h(75); padding:0 w(2) 0 0; border-radius:w(7.5); font-size:h(25);' style='border:none; box-shadow:inset 4px 4px 4px rgba(0,0,0,0.4); text-align:right;'>
        <div R='width:w(27.5); height:h(75); font-size:h(25);'>
          .sTiny.link
        </div>
      </div>
      <div R='height:h(45)'>
        <div id='sTinyLinkButton' class='button' R='width:w(45); height:h(75); margin:w(2); border-radius:w(3); font-size:h(25);' style='color:black; background:rgba(255,255,255,0.7);'>
          Create Link
        </div>
        <div id='sTinyTest' class='button' R='width:w(45); height:h(75); margin:w(2); border-radius:w(3); font-size:h(25);' style='color:black; background:rgba(255,255,255,0.7);'>
          Test it
        </div>
      </div>
    </div>
  </div>
  <div class='bottomCenterAlign' R='height:h(20)'>
    <div R='width:w(90); height:h(80); border:white w(1) solid; border-radius:w(7.5);'>
      <div R='height:h(45)'>
        <input id='othersInput' type='text' placeholder='John.Doe' autocomplete='off' R='width:w(65); height:h(75); padding:0 w(2) 0 0; border-radius:w(7.5); font-size:h(25);' style='border:none; box-shadow:inset 4px 4px 4px rgba(0,0,0,0.4); text-align:right;'>
        <select id='othersSelect' R='width:w(26); height:h(75); margin:0 0 0 w(1.5); border:white w(0.5) solid; border-radius:w(7.5); font-size:h(25);' style='color:white; background:rgba(0,0,0,0.1)'></select>
      </div>
      <div R='height:h(45)'>
        <div id='othersButton' class='button' R='width:w(45); height:h(75); margin:w(2); border-radius:w(3); font-size:h(25);' style='color:black; background:rgba(255,255,255,0.7);'>
          Create Link
        </div>
        <div id='othersTest' class='button' R='width:w(45); height:h(75); margin:w(2); border-radius:w(3); font-size:h(25);' style='color:black; background:rgba(255,255,255,0.7);'>
          Test it
        </div>
      </div>
    </div>
  </div>
  <div R='height:h(35)'>
    <div class='bottomCenterAlign' R='height:h(15)'>
      <img src='https://suburl.at/resources/images/result.png' R='width:w(70)'>
    </div>
    <div R='height:h(20)'>
      <input id='result' type='text' placeholder='John.Doe.sTiny.link/3x4mP1e' autocomplete='off' R='width:w(90); height:h(75); border-radius:w(3); font-size:h(25);' style='border:none; box-shadow:inset 4px 4px 4px rgba(0,0,0,0.4); text-align:center;'>
    </div>
    <div R='height:h(20)'>
      <div id='onlyMain' class='button' R='width:w(90); height:h(75); border-radius:w(3); font-size:h(30);' style='background:rgba(0,0,0,0.7);'>
        Copy link
      </div>
    </div>
    <div R='height:h(20)'>
      <div id='tweet' class='button' R='width:w(90); height:h(75); border-radius:w(3); font-size:h(30);' style='background:rgba(29,161,242,0.7);'>
        Copy it to Twitter
      </div>
    </div>
    <div R='height:h(25); font-size:h(5.5);'>
      <b class='button' onclick="location.href = '../'">‚Üê Go Back</b>
    </div>
  </div>
</div>
    
<script>
  resizeResponsiveElements()
  window.addEventListener("resize", function() {
    resizeResponsiveElements()
  })
  var domains = ['littl.cc']
  var optionPreset = '<option value="placeNumb1">.placeNumb2</option>'
  for ( i in domains){
    id('othersSelect').innerHTML += optionPreset.replace('placeNumb1',domains[i]).replace('placeNumb2',domains[i])
  }
  if(getParameter('from')){
    id('othersSelect').value = getParameter('from')
  }
  if(getParameter('shortCode')){
    shortCode = getParameter('shortCode')
    addSubUrl = ' (subURL.at/#' + shortCode + ')'
  }else{
    alert("There is no record of the link to be shortened. we'll move you to the main page!")
    location.href = '/sTiny.link'
  }
  id('othersInput').addEventListener("input", function() {
    id('othersInput').value = id('othersInput').value.replaceAll(' ','.')
    id('othersInput').value = id('othersInput').value.replaceAll('..','.')
  })
  id('sTinyLinkInput').addEventListener("input", function() {
    id('sTinyLinkInput').value = id('sTinyLinkInput').value.replaceAll(' ','.')
    id('sTinyLinkInput').value = id('sTinyLinkInput').value.replaceAll('..','.')
  })
  id('sTinyLinkButton').addEventListener("click", function() {
    sTinyCreate()
  })
  id('sTinyTest').addEventListener("click", function() {
    sTinyCreate()
    window.open('http://' + id('result').value)
  })
  function sTinyCreate(){
    if(id('sTinyLinkInput').value){
      id('result').value = (id('sTinyLinkInput').value + '.sTiny.link/' + shortCode).replaceAll('..','.')
    }else{
      id('result').value = 'sTiny.link/' + shortCode
    }
  }
  
  id('othersButton').addEventListener("click", function() {
    othersCreate()
  })
  id('othersTest').addEventListener("click", function() {
    othersCreate()
    window.open('http://' + id('result').value)
  })
  function othersCreate(){
    if(id('othersInput').value){
      id('result').value = (id('othersInput').value + '.' + id('othersSelect').value + '/' + shortCode).replaceAll('..','.')
    }else{
      id('result').value = id('othersSelect').value + '/' + shortCode
    }
  }
  id('onlyMain').addEventListener("click", function() {
    if(id('result').value){
      id('result').value = id('result').value.replaceAll(addSubUrl,'')
      id('result').select()
      document.execCommand("copy");
      id('result').blur()
      id('onlyMain').innerHTML = 'Copied to Clipboard!'
      setTimeout(function(){
        id('onlyMain').innerHTML = 'Copy link'
      },2000)
    }else{
      id('onlyMain').innerHTML = 'No link yet. Create one first!'
      setTimeout(function(){
        id('onlyMain').innerHTML = 'Copy link'
      },2000)
    }
  })
  /*id('withSub').addEventListener("click", function() {
    if(id('result').value){
      id('result').value = id('result').value.replaceAll(addSubUrl,'')
      id('result').value += addSubUrl
      id('result').select()
      document.execCommand("copy");
      id('result').blur()
      alert('Copied to Clipboard!')
    }else{
      alert('No link to be Copied. Create one first!')
    }
  })*/
  id('tweet').addEventListener("click", function() {
    var twitterAllowed, twitterCheck
    if(id('result').value){
      id('result').select()
      document.execCommand("copy");
      id('result').blur()
      twitterAllowed = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890./:'
      twitterCheck = id('result').value
      for (i in twitterAllowed){
        twitterCheck = twitterCheck.replaceAll(twitterAllowed[i],'')
      }
      if (twitterCheck == ''){
        twitterGenerate('%F0%9F%94%97 ' + id('result').value.replaceAll(addSubUrl,'') + '%0A')
      }else{
        new Promise(function(resolve, reject) {
          if (window.confirm("üò¢ Sadly Twitter does not allow non-English characters to be hyperlinked. We can add you an additional SubLink that does work on twitter OR you can rename your link. Proceed to Twitter?")){
            resolve(true)
          }else{
            reject()
          }
        }).then(function(){
          twitterGenerate('%F0%9F%94%97 ' + id('result').value.replaceAll(addSubUrl,'') + '%0A' + '%F0%9F%A5%88 subURL.at/%23' + shortCode)
        })
      }
      function twitterGenerate(twt){
        if(mobileCheck()){
          twitterCount = 3
          id('tweet').innerHTML = 'Loading Twitter in ' + twitterCount
          twitterTextAnimation()
          function twitterTextAnimation(){
            twitterTimer = setTimeout(function(){
              if(twitterCount > 0){
                twitterCount -= 1
                id('tweet').innerHTML = 'Loading Twitter in ' + twitterCount
                twitterTextAnimation()
              }else{
                id('tweet').innerHTML = 'Copy it to Twitter'
              }
            },1000)
          }
          appCheck('twitter://post?message=' + twt,3000).then(function(result){
            if(result){
              clearTimeout(twitterTimer)
              id('tweet').innerHTML = 'Copy it to Twitter'
            }else{
              window.open('https://twitter.com/intent/tweet?text=' + twt)
            }
          })
        }else{
          window.open('https://twitter.com/intent/tweet?text=' + twt)
        }
      }
    }else{
      id('tweet').innerHTML = 'No link yet. Create one first!'
      setTimeout(function(){
        id('tweet').innerHTML = 'Copy it to Twitter'
      },2000)
    }
  })
</script>

  </body>
  <footer>
  </footer>
  <style>
    @font-face {
      font-family: 'GmarketSansLight';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansLight.woff') format('woff');
      font-weight: normal;
      font-style: normal;
      transform: translateY(100%);
    }
    @font-face {
      font-family: 'GmarketSansBold';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansBold.woff') format('woff');
      font-weight: normal;
      font-style: normal;
    }
  </style>
</html>
